# Default values for traefik.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

traefik:
  ports:
    web:
      redirectTo: websecure
  
  http:
    services:
      zitadel:
        loadBalancer:
          servers:
          - url: h2c://localhost:8080
          passHostHeader: true

    middlewares:
      zitadel:
        headers:
          isDevelopment: false
          allowedHosts:
          - 'localhost'
      redirect-to-https:
        redirectScheme:
          scheme: https
          port: 443
          permanent: true
    routers:
      router0:
        entryPoints:
        - web
        middlewares:
        - redirect-to-https
        rule: 'HostRegexp(`localhost`, `{subdomain:[a-z]+}.localhost`)'
        service: zitadel
      router1:
        entryPoints:
        - websecure
        service: zitadel
        middlewares:
        - zitadel
        rule: 'HostRegexp(`localhost`, `{subdomain:[a-z]+}.localhost`)'
        tls:
          domains:
            - main: "localhost"
              sans:
                - "*.localhost"
                - "localhost"